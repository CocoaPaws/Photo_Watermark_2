# 产品需求文档（PRD）

**产品名称**：本地水印处理工具（Windows 桌面应用）
**版本**：V1.0
**文档状态**：草案
**目标发布日期**：待定

---

## 1. 产品概述

本产品是一款 **Windows 桌面应用**，用于批量给图片添加水印（文本或图片），并支持多种导入/导出配置。目标用户为 **摄影师、设计师、电商商家以及需要保护图片版权的个人/企业**。

核心目标：

* 提供简单高效的本地图片水印添加功能；
* 支持批量处理与灵活的导出命名；
* 支持水印样式与位置的灵活调整；
* 提供模板功能，提升高频用户的使用效率。

---

## 2. 功能需求

### 2.1 文件处理

#### 2.1.1 导入图片

* **需求**：

  * 支持单张图片拖拽或通过文件选择器导入；
  * 支持批量导入：一次选择多张图片或导入整个文件夹；
  * 界面显示已导入图片列表（缩略图 + 文件名）。
* **优先级**：高

#### 2.1.2 支持格式

* 输入格式：JPEG、PNG（含透明通道）、BMP、TIFF。
* 输出格式：JPEG 或 PNG（用户可选）。
* **优先级**：高

#### 2.1.3 导出图片

* **功能点**：

  * 用户可指定输出文件夹（默认禁止与原文件夹相同）；
  * 导出文件命名规则：

    1. 保留原文件名；
    2. 添加自定义前缀（如 `wm_`）；
    3. 添加自定义后缀（如 `_watermarked`）；
  * JPEG 导出支持质量调节（压缩率 0-100）；【高级功能】
  * 导出时可调整尺寸（宽度、高度或百分比缩放）；【高级功能】
* **优先级**：高（基础导出），中（高级功能）。

---

### 2.2 水印类型

#### 2.2.1 文本水印

* **需求**：

  * 用户输入任意文本；
  * 支持选择系统字体、字号、加粗、斜体；【高级功能】
  * 支持字体颜色选择器；【高级功能】
  * 支持透明度调整（0-100%）；
  * 支持阴影/描边效果；【高级功能】
* **优先级**：高（文本、透明度），中（字体、颜色），低（阴影描边）。

#### 2.2.2 图片水印【高级功能】

* 用户从本地选择一张图片（如 Logo）；
* 必须支持带透明通道的 PNG；
* 可按比例缩放或自由调整；
* 支持透明度调节（0-100%）。
* **优先级**：中

---

### 2.3 水印布局与样式

#### 2.3.1 实时预览

* 所有水印调整均实时在预览窗口显示；
* 用户可在图片列表中切换预览目标。
* **优先级**：高

#### 2.3.2 位置

* 提供九宫格预设位置（四角 + 四边中点 + 正中心）；
* 用户可在预览图上用鼠标拖拽水印到任意位置；
* **优先级**：高

#### 2.3.3 旋转【高级功能】

* 支持滑块或输入角度数值，任意角度旋转水印。
* **优先级**：低

---

### 2.4 配置管理

#### 2.4.1 水印模板

* 用户可保存当前设置（文本/图片、字体、颜色、位置、透明度等）；
* 模板可加载、管理（重命名/删除）；
* 程序启动时默认加载上次关闭时的设置或默认模板。
* **优先级**：中

---

## 3. 非功能需求

* **平台**：Windows 10 及以上；
* **性能**：

  * 批量导出 100 张 1920×1080 图片，单次处理时间不超过 1 分钟；
  * 内存占用 ≤ 500MB（常规使用情况下）；
* **稳定性**：导入大批量文件时不崩溃，支持 1000 张以上图片列表。
* **易用性**：拖拽操作直观，导出设置流程简单。

---

## 4. 界面原型（建议）

* **主界面布局**：

  * 左侧：图片列表（缩略图+文件名）；
  * 中央：预览区（实时水印效果）；
  * 右侧：水印配置区（文本/图片、样式、位置、透明度等）；
  * 底部：导入、导出按钮。

---

## 5. 功能优先级总结

* **V1 必做**：图片导入/导出、JPEG/PNG 支持、文本水印（文字输入+透明度+预设位置+拖拽）、实时预览、导出命名规则。
* **V1.5 增强**：图片水印、字体选择、颜色选择、模板保存、导出尺寸缩放。
* **V2 高级**：旋转、阴影描边、批量导出优化。

---
